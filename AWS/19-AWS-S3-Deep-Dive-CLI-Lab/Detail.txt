âœ… S3 Deep Dive (Full Final Notes with Labs)

ğŸ“˜ 1. Conceptual Explanation
ğŸ”¹ What is S3?
Amazon S3 (Simple Storage Service) is an object-based storage system used to store files, backups, images, logs, and more in the cloud.
ğŸ’¡ It is not a file system like your computer's C drive. It stores data as objects in buckets.

ğŸ”¸ Roman Urdu:
S3 ek cloud-based drive jaisa hai jismein aap data "bucket" ke andar rakhte ho. Jaise Google Drive mein folders hote hain, waise S3 mein buckets hote hain.

ğŸŒ Real-Life Example:
Imagine a website jismein 100 images hain. Har image S3 bucket mein stored hoti hai. Jab website khulti hai, images S3 ke public URL se load hoti hain.

âš™ï¸ 2. CLI Installation & Configuration
ğŸ”¹ Step 1: Install AWS CLI (Ubuntu)
sudo apt update
sudo apt install awscli -y

ğŸ”¹ Step 2: Configure AWS CLI
aws configure
You'll need:
â€¢ Access Key
â€¢ Secret Key
â€¢ Region (e.g. ap-south-1)
â€¢ Output format (e.g. json)

ğŸ”¸ Roman Urdu:
CLI se AWS ko control karne ke liye humein pehle aws configure command chalani padti hai. Ismein hum apna AWS account connect karte hain.

ğŸª£ 3. Practical Work â€“ Bucket Creation & File Upload via CLI
ğŸ”¹ Step 1: Create S3 Bucket
aws s3 mb s3://my-cli-bucket-devops
ğŸ’¡ Bucket name globally unique hona chahiye.

ğŸ”¹ Step 2: Make Bucket Public via Bucket Policy (Advanced Step Explained) âš ï¸
Default Behavior:
Har S3 bucket by default private hoti hai â€” iska matlab koi bhi file URL open nahi kar sakta jab tak permission na mile.

âœ… How to Set Public Access via CLI
1. Disable "Block Public Access"
aws s3api put-public-access-block \
--bucket my-cli-bucket-devops \
--public-access-block-configuration BlockPublicAcls=false,IgnorePublicAcls=false,BlockPublicPolicy=false,RestrictPublicBuckets=false

2. Add Bucket Policy to Allow Public Read
aws s3api put-bucket-policy \
--bucket my-cli-bucket-devops \
--policy '{
"Version":"2012-10-17",
"Statement":[{
"Sid":"PublicReadGetObject",
"Effect":"Allow",
"Principal": "*",
"Action":["s3:GetObject"],
"Resource":["arn:aws:s3:::my-cli-bucket-devops/*"]
}]
}'

ğŸ”¸ Roman Urdu:
Ye 2 step important hain:
Pehle hum bucket ka public block hataate hain, phir ek policy lagate hain jismein har koi (*) S3 object ko read kar sakta hai.
Iske baad aapka object URL browser mein open ho jata hai.

ğŸ“¤ 4. Upload File to S3 via CLI
echo "My DevOps File" > file.txt
aws s3 cp file.txt s3://my-cli-bucket-devops/

ğŸ”¸ Roman Urdu:
Humne terminal se file banayi aur usi ko S3 bucket mein upload kiya. Agar bucket public hai to iska object URL browser mein open ho sakta hai.

ğŸ” 5. Check URL Access
URL Format:
https://my-cli-bucket-devops.s3.amazonaws.com/file.txt
Agar bucket public policy ke saath set hai, to ye URL kisi bhi browser mein open hoga.

ğŸ§‘â€ğŸ’» 6. Assignment â€“ Upload & Manage via CLI
Upload test file:
aws s3 cp test.txt s3://my-cli-bucket-devops/
List contents:
aws s3 ls s3://my-cli-bucket-devops/

ğŸª£ 7. Lab Task â€“ Full Flow
ğŸ”¹ Step 1: Create a file
echo "File data for testing" > file.txt

ğŸ”¹ Step 2: Upload to S3
aws s3 cp file.txt s3://my-cli-bucket-devops/

ğŸ”¹ Step 3: List bucket contents
aws s3 ls s3://my-cli-bucket-devops/

ğŸ”¹ Step 4: Download file back to EC2
aws s3 cp s3://my-cli-bucket-devops/file.txt .

ğŸ” Why Download Back?
Hum file ko download kar ke check karte hain ke:
â€¢ âœ… Upload properly hua tha
â€¢ âœ… File corrupt ya empty to nahi ho gayi
â€¢ âœ… File ka content wahi hai jo humne likha tha

ğŸ”¸ Roman Urdu:
Hum file ko S3 se wapas EC2 par la rahe hain taake verify kar sakein ke upload ke baad file bilkul sahi hai ya nahi.

ğŸ”¹ Step 5: View file content
cat file.txt

âœ… Checklist â€“ Tum ne kya kya complete kiya hai?
Task Status
CLI installed & configured âœ…
Bucket created via CLI âœ…
Public access set via policy âœ…
File uploaded âœ…
Object URL used âœ…
File download + content check âœ…

ğŸª£ Conclusion â€“ Tumhara kaam complete hai!
Tumne S3 ko CLI se control karna seekh liya hai:
â€¢ âœ… CLI installation
â€¢ âœ… Bucket creation
â€¢ âœ… Public access policy
â€¢ âœ… Upload + download + verify

ğŸ¯ Ye DevOps ke real-world use case ka part hai. Console ki jagah CLI use karna professional practice hoti hai.

